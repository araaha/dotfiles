<!-- Labwc config with Openbox rc.xml settings ported in -->

<labwc_config>

  <core>
    <decoration>server</decoration>
    <gap>0</gap>
    <adaptiveSync>no</adaptiveSync>
    <allowTearing>no</allowTearing>
    <autoEnableOutputs>yes</autoEnableOutputs>
    <reuseOutputMode>no</reuseOutputMode>
    <xwaylandPersistence>no</xwaylandPersistence>
    <primarySelection>yes</primarySelection>
    <!--
      # See labwc-config(5) for details
      <promptCommand></promptCommand>
    -->
  </core>

  <placement>
    <policy>cascade</policy>
    <!--
      When <placement><policy> is "cascade", the offset for cascading new
      windows can be overwritten like this:
      <cascadeOffset x="40" y="30" />
    -->
  </placement>

  <theme>
    <!-- from Openbox theme name -->
    <name>gruvbox-material-dark-blocks</name>
    <icon></icon>
    <fallbackAppIcon>labwc</fallbackAppIcon>
    <titlebar>
      <!-- layout kept similar to default; Openbox titleLayout is not 1:1 -->
      <layout>icon:iconify,max,close</layout>
      <showTitle>yes</showTitle>
    </titlebar>
    <cornerRadius>8</cornerRadius>
    <!-- Openbox keepBorder was 'no' for theme -->
    <keepBorder>no</keepBorder>
    <maximizedDecoration>titlebar</maximizedDecoration>
    <dropShadows>no</dropShadows>
    <dropShadowsOnTiled>no</dropShadowsOnTiled>

    <!-- Fonts ported from Openbox -->
    <font place="ActiveWindow">
      <name>Segoe UI</name>
      <size>15</size>
      <slant>normal</slant>
      <weight>bold</weight>
    </font>
    <font place="InactiveWindow">
      <name>Segoe UI</name>
      <size>15</size>
      <slant>normal</slant>
      <weight>bold</weight>
    </font>
    <font place="MenuHeader">
      <name>Segoe UI</name>
      <size>16</size>
      <slant>normal</slant>
      <weight>normal</weight>
    </font>
    <font place="MenuItem">
      <name>Segoe UI</name>
      <size>16</size>
      <slant>normal</slant>
      <weight>normal</weight>
    </font>
    <font place="OnScreenDisplay">
      <!-- merged Active/InactiveOnScreenDisplay from Openbox -->
      <name>Segoe UI</name>
      <size>12</size>
      <slant>normal</slant>
      <weight>bold</weight>
    </font>
  </theme>

  <windowSwitcher preview="yes" outlines="yes" allWorkspaces="no" unshade="yes">
    <osd show="yes" style="classic" output="all" thumbnailLabelFormat="%T" />
    <fields>
      <field content="icon" width="5%" />
      <field content="desktop_entry_name" width="30%" />
      <field content="title" width="65%" />
    </fields>
  </windowSwitcher>

  <!-- edge strength is in pixels -->
  <resistance>
    <screenEdgeStrength>20</screenEdgeStrength>
    <!-- from Openbox resistance strength=10 -->
    <windowEdgeStrength>10</windowEdgeStrength>
    <!-- resistance for maximized/tiled windows -->
    <unSnapThreshold>20</unSnapThreshold>
    <!-- resistance for vertically/horizontally maximized windows -->
    <unMaximizeThreshold>150</unMaximizeThreshold>
  </resistance>

  <resize>
    <!-- Show a simple resize and move indicator -->
    <popupShow>Never</popupShow>
    <!-- Let client redraw its contents while resizing -->
    <drawContents>yes</drawContents>
    <!-- Borders are effectively 8 pixels wide regardless of visual appearance -->
    <minimumArea>8</minimumArea>
  </resize>

  <focus>
    <followMouse>no</followMouse>
    <followMouseRequiresMovement>yes</followMouseRequiresMovement>
    <raiseOnFocus>no</raiseOnFocus>
  </focus>

  <snapping>
    <!-- Set range to 0 to disable window snapping completely -->
    <range>10</range>
    <cornerRange>50</cornerRange>
    <overlay enabled="yes">
      <delay inner="500" outer="500" />
    </overlay>
    <topMaximize>yes</topMaximize>
    <notifyClient>always</notifyClient>
  </snapping>

  <!-- Desktops: from Openbox (4 desktops, popupTime=875) -->
  <desktops>
    <popupTime>875</popupTime>
    <number>4</number>
    <!-- names left empty, as in Openbox config -->
  </desktops>

  <!--
    Percent-based regions for SnapToRegion, built from your Openbox
    MoveResizeTo tiling layout (single-monitor).
  -->
  <regions>
    <!-- halves -->
    <region name="left-half"     x="0%"   y="0%"  width="50%"  height="100%" />
    <region name="right-half"    x="50%"  y="0%"  width="50%"  height="100%" />
    <region name="top-half"      x="0%"   y="0%"  width="100%" height="50%"  />
    <region name="bottom-half"   x="0%"   y="50%" width="100%" height="50%"  />

    <!-- full-height thirds (W-q/w/e) -->
    <region name="left-third"    x="0%"   y="0%"  width="33%"  height="100%" />
    <region name="center-third"  x="33%"  y="0%"  width="34%"  height="100%" />
    <region name="right-third"   x="67%"  y="0%"  width="33%"  height="100%" />

    <!-- quadrants (W-1..4) -->
    <region name="top-left"      x="0%"   y="0%"  width="50%"  height="50%"  />
    <region name="top-right"     x="50%"  y="0%"  width="50%"  height="50%"  />
    <region name="bottom-left"   x="0%"   y="50%" width="50%"  height="50%"  />
    <region name="bottom-right"  x="50%"  y="50%" width="50%"  height="50%"  />

    <!-- top 3-columns (W-5/6/7) -->
    <region name="top-left-third"    x="0%"   y="0%"  width="33%"  height="50%" />
    <region name="top-center-third"  x="33%"  y="0%"  width="34%"  height="50%" />
    <region name="top-right-third"   x="67%"  y="0%"  width="33%"  height="50%" />

    <!-- bottom 3-columns (W-t/y/u) -->
    <region name="bottom-left-third"   x="0%"   y="50%" width="33%"  height="50%" />
    <region name="bottom-center-third" x="33%"  y="50%" width="34%"  height="50%" />
    <region name="bottom-right-third"  x="67%"  y="50%" width="33%"  height="50%" />
  </regions>

  <keyboard>
    <layoutScope>global</layoutScope>
    <repeatRate>25</repeatRate>
    <repeatDelay>600</repeatDelay>

    <!-- Window switching (from Openbox) -->
    <keybind key="A-Tab">
      <action name="NextWindow" />
    </keybind>
    <keybind key="A-S-Tab">
      <action name="PreviousWindow" />
    </keybind>
    <keybind key="C-A-Tab">
      <action name="NextWindow" />
    </keybind>

    <!-- Terminal / launcher -->
    <!-- Openbox C-A-a: full-screen-ish tmux in Alacritty -->
    <keybind key="C-A-a">
      <action name="Execute"
              command="alacritty -o 'window.startup_mode=&quot;Maximized&quot;' -o 'window.opacity=1' -e tmux" />
    </keybind>
    <!-- Dropdown terminal -->
    <keybind key="C-A-t">
      <action name="Execute"
              command="tdrop -A -y 50% -h 50% -s tmux alacritty --title=Dropdown" />
    </keybind>
    <!-- App launcher -->
    <keybind key="C-A-r">
      <action name="Execute"
              command="rofi -show-icons -show drun -modi drun" />
    </keybind>
    <!-- Calculator launcher -->
    <keybind key="C-A-q">
      <action name="Execute"
              command="rofi -show calc -modi calc -no-show-match -no-sort -terse -no-bold -calc-command &quot;echo -n '{result}' | xclip -r -sel clip&quot; -kb-secondary-copy &quot;&quot; -kb-accept-entry &quot;Return,Control+c&quot;" />
    </keybind>
    <!-- Clipboard menu -->
    <keybind key="C-A-c">
      <action name="Execute"
              command="rofi -kb-accept-entry &quot;Control+c,Return&quot; -kb-secondary-copy &quot;&quot; -modi &quot;clipboard:greenclip print&quot; -show clipboard -run-command '{cmd}'" />
    </keybind>
    <!-- Password manager -->
    <keybind key="C-A-p">
      <action name="Execute"
              command="env PASSWORD_STORE_DIR=/home/araaha/.local/share/pass GNUPGHOME=/home/araaha/.local/share/.gnupg rofi-pass" />
    </keybind>

    <!-- Screenshot (0xDA keycode from Openbox) -->
    <keybind key="0xDA">
      <action name="Execute"
              command="~/dotfiles/scripts/screenshot.sh select" />
    </keybind>

    <!-- Uair timer toggle -->
    <keybind key="C-A-u">
      <action name="Execute"
              command="uairctl toggle" />
    </keybind>

    <!-- Default Labwc terminal (Super+Return) still available -->
    <keybind key="W-Return">
      <action name="Execute" command="lab-sensible-terminal" />
    </keybind>

    <!-- Window close -->
    <keybind key="A-F4">
      <action name="Close" />
    </keybind>

    <!-- “Escape” window: approximate Lower+Unfocus with Iconify+Unfocus -->
    <keybind key="A-Escape">
      <action name="Iconify" />
      <action name="Unfocus" />
    </keybind>

    <!-- Maximize / toggle fullscreen-ish -->
    <!-- XF86AudioNext was ToggleMaximize in your Openbox config -->
    <keybind key="XF86_AudioNext">
      <action name="ToggleMaximize" />
    </keybind>
    <keybind key="W-f">
      <action name="ToggleMaximize" />
    </keybind>
    <!-- Keep original Super+a maximize -->
    <keybind key="W-a">
      <action name="ToggleMaximize" />
    </keybind>

    <!-- Your tiling layout using SnapToRegion -->
    <!-- Half splits -->
    <keybind key="W-h">
      <action name="SnapToRegion" region="left-half" />
    </keybind>
    <keybind key="W-l">
      <action name="SnapToRegion" region="right-half" />
    </keybind>
    <keybind key="W-k">
      <action name="SnapToRegion" region="top-half" />
    </keybind>
    <keybind key="W-j">
      <action name="SnapToRegion" region="bottom-half" />
    </keybind>

    <!-- Full-height thirds (W-q/w/e) -->
    <keybind key="W-q">
      <action name="SnapToRegion" region="left-third" />
    </keybind>
    <keybind key="W-w">
      <action name="SnapToRegion" region="center-third" />
    </keybind>
    <keybind key="W-e">
      <action name="SnapToRegion" region="right-third" />
    </keybind>

    <!-- Quadrants (W-1..4) -->
    <keybind key="W-1">
      <action name="SnapToRegion" region="top-left" />
    </keybind>
    <keybind key="W-2">
      <action name="SnapToRegion" region="top-right" />
    </keybind>
    <keybind key="W-3">
      <action name="SnapToRegion" region="bottom-left" />
    </keybind>
    <keybind key="W-4">
      <action name="SnapToRegion" region="bottom-right" />
    </keybind>

    <!-- Top 3 columns (W-5/6/7) -->
    <keybind key="W-5">
      <action name="SnapToRegion" region="top-left-third" />
    </keybind>
    <keybind key="W-6">
      <action name="SnapToRegion" region="top-center-third" />
    </keybind>
    <keybind key="W-7">
      <action name="SnapToRegion" region="top-right-third" />
    </keybind>

    <!-- Bottom 3 columns (W-t/y/u) -->
    <keybind key="W-t">
      <action name="SnapToRegion" region="bottom-left-third" />
    </keybind>
    <keybind key="W-y">
      <action name="SnapToRegion" region="bottom-center-third" />
    </keybind>
    <keybind key="W-u">
      <action name="SnapToRegion" region="bottom-right-third" />
    </keybind>

    <!-- Show client menu -->
    <keybind key="A-Home">
      <action name="ShowMenu" menu="client-menu" atCursor="no" />
    </keybind>

    <!-- Show client-menu via A-Space as in Labwc default -->
    <keybind key="A-Space">
      <action name="ShowMenu" menu="client-menu" atCursor="no" />
    </keybind>

    <!-- Show desktop (approximate) -->
    <keybind key="W-d">
      <action name="ToggleShowDesktop" />
    </keybind>

    <!-- Polybar toggle -->
    <keybind key="W-b">
      <action name="Execute"
              command="polybar-msg cmd toggle" />
    </keybind>

    <!-- Brightness (your scripts, not brightnessctl) -->
    <keybind key="XF86_MonBrightnessUp">
      <action name="Execute"
              command="~/dotfiles/scripts/backlight-inc.sh" />
    </keybind>
    <keybind key="XF86_MonBrightnessDown">
      <action name="Execute"
              command="~/dotfiles/scripts/backlight-dec.sh" />
    </keybind>

    <!-- Color temperature on audio prev/mic-mute keys -->
    <keybind key="XF86_AudioPrev">
      <action name="Execute"
              command="~/.local/bin/xsct -d 0 0.1" />
    </keybind>
    <keybind key="XF86_AudioMicMute">
      <action name="Execute"
              command="~/.local/bin/xsct -d 0 -0.1" />
    </keybind>

    <!-- Volume + mute -->
    <keybind key="XF86_AudioRaiseVolume">
      <action name="Execute"
              command="pamixer --allow-boost -i 2" />
    </keybind>
    <keybind key="XF86_AudioLowerVolume">
      <action name="Execute"
              command="pamixer --allow-boost -d 2" />
    </keybind>
    <keybind key="XF86_AudioMute">
      <action name="Execute"
              command="pamixer --toggle-mute" />
    </keybind>

    <!-- Media control -->
    <keybind key="XF86_AudioPlay">
      <action name="Execute"
              command="playerctl play-pause" />
    </keybind>
    <keybind key="XF86_AudioPause">
      <action name="Execute"
              command="playerctl play-pause" />
    </keybind>

    <!-- Workspace navigation (mapped to left/right; Labwc only supports left/right) -->
    <keybind key="C-A-h">
      <action name="GoToDesktop" to="left" wrap="no" />
    </keybind>
    <keybind key="C-A-l">
      <action name="GoToDesktop" to="right" wrap="no" />
    </keybind>
    <!-- Up/Down from Openbox mapped approximately to left/right -->
    <keybind key="C-A-k">
      <action name="GoToDesktop" to="left" wrap="no" />
    </keybind>
    <keybind key="C-A-j">
      <action name="GoToDesktop" to="right" wrap="no" />
    </keybind>

    <!-- Send window to other desktops (approximate up/down as left/right) -->
    <keybind key="S-A-h">
      <action name="SendToDesktop" to="left" wrap="no" />
    </keybind>
    <keybind key="S-A-l">
      <action name="SendToDesktop" to="right" wrap="no" />
    </keybind>
    <keybind key="S-A-k">
      <action name="SendToDesktop" to="left" wrap="no" />
    </keybind>
    <keybind key="S-A-j">
      <action name="SendToDesktop" to="right" wrap="no" />
    </keybind>

    <!-- Go to specific desktops (1..4) -->
    <keybind key="W-F1">
      <action name="GoToDesktop" to="1" />
    </keybind>
    <keybind key="W-F2">
      <action name="GoToDesktop" to="2" />
    </keybind>
    <keybind key="W-F3">
      <action name="GoToDesktop" to="3" />
    </keybind>
    <keybind key="W-F4">
      <action name="GoToDesktop" to="4" />
    </keybind>

    <!-- Labwc default snap-to-edge still available -->
    <keybind key="W-Left">
      <action name="SnapToEdge" direction="left" combine="yes" />
    </keybind>
    <keybind key="W-Right">
      <action name="SnapToEdge" direction="right" combine="yes" />
    </keybind>
    <keybind key="W-Up">
      <action name="SnapToEdge" direction="up" combine="yes" />
    </keybind>
    <keybind key="W-Down">
      <action name="SnapToEdge" direction="down" combine="yes" />
    </keybind>

  </keyboard>

  <mouse>

    <!-- time is in ms -->
    <doubleClickTime>500</doubleClickTime>

    <!-- Alt-drag behaviour from your Openbox config -->
    <context name="Frame">
      <mousebind button="A-Left" action="Press">
        <action name="Focus" />
        <action name="Raise" />
      </mousebind>
      <mousebind button="A-Left" action="Click">
        <action name="Unshade" />
      </mousebind>
      <mousebind button="A-Left" action="Drag">
        <action name="Move" />
      </mousebind>
      <mousebind button="A-Right" action="Press">
        <action name="Focus" />
        <action name="Raise" />
      </mousebind>
      <mousebind button="A-Right" action="Drag">
        <action name="Resize" />
      </mousebind>
    </context>

    <context name="Border">
      <mousebind button="Left" action="Press">
        <action name="Focus" />
        <action name="Raise" />
      </mousebind>
      <mousebind button="Left" action="Drag">
        <action name="Resize" />
      </mousebind>
    </context>

    <context name="TitleBar">
      <mousebind button="Left" action="Press">
        <action name="Focus" />
        <action name="Raise" />
      </mousebind>
      <mousebind button="Right" action="Click">
        <action name="Focus" />
        <action name="Raise" />
      </mousebind>
      <!-- Scroll-up/down to shade/unshade like Labwc default -->
      <mousebind direction="Up" action="Scroll">
        <action name="Unshade" />
        <action name="Focus" />
      </mousebind>
      <mousebind direction="Down" action="Scroll">
        <action name="Unfocus" />
        <action name="Shade" />
      </mousebind>
    </context>

    <context name="Title">
      <mousebind button="Left" action="Drag">
        <action name="Move" />
      </mousebind>
      <mousebind button="Left" action="DoubleClick">
        <action name="ToggleMaximize" />
      </mousebind>
      <mousebind button="Right" action="Click">
        <action name="ShowMenu" menu="client-menu" />
      </mousebind>
    </context>

    <context name="Maximize">
      <mousebind button="Left" action="Click">
        <action name="ToggleMaximize" />
      </mousebind>
      <mousebind button="Right" action="Click">
        <action name="ToggleMaximize" direction="horizontal" />
      </mousebind>
      <mousebind button="Middle" action="Click">
        <action name="ToggleMaximize" direction="vertical" />
      </mousebind>
    </context>

    <context name="WindowMenu">
      <mousebind button="Left" action="Click">
        <action name="ShowMenu" menu="client-menu" atCursor="no" />
      </mousebind>
      <mousebind button="Right" action="Click">
        <action name="ShowMenu" menu="client-menu" atCursor="no" />
      </mousebind>
    </context>

    <context name="Icon">
      <mousebind button="Left" action="Click">
        <action name="ShowMenu" menu="client-menu" atCursor="no" />
      </mousebind>
      <mousebind button="Right" action="Click">
        <action name="ShowMenu" menu="client-menu" atCursor="no" />
      </mousebind>
    </context>

    <context name="Shade">
      <mousebind button="Left" action="Click">
        <action name="ToggleShade" />
      </mousebind>
    </context>

    <context name="AllDesktops">
      <mousebind button="Left" action="Click">
        <action name="ToggleOmnipresent" />
      </mousebind>
    </context>

    <context name="Iconify">
      <mousebind button="Left" action="Click">
        <action name="Iconify" />
      </mousebind>
    </context>

    <context name="Close">
      <mousebind button="Left" action="Click">
        <action name="Close" />
      </mousebind>
    </context>

    <context name="Client">
      <mousebind button="Left" action="Press">
        <action name="Focus" />
        <action name="Raise" />
      </mousebind>
      <mousebind button="Middle" action="Press">
        <action name="Focus" />
        <action name="Raise" />
      </mousebind>
      <mousebind button="Right" action="Press">
        <action name="Focus" />
        <action name="Raise" />
      </mousebind>
    </context>

    <!-- Root / Desktop: more like your Openbox behaviour -->
    <context name="Root">
      <!-- middle: client-list-combined-menu -->
      <mousebind button="Middle" action="Press">
        <action name="ShowMenu" menu="client-list-combined-menu" />
      </mousebind>
      <!-- right: root-menu -->
      <mousebind button="Right" action="Press">
        <action name="ShowMenu" menu="root-menu" />
      </mousebind>
      <!-- left: keep root-menu for convenience -->
      <mousebind button="Left" action="Press">
        <action name="ShowMenu" menu="root-menu" />
      </mousebind>
      <!-- Scroll to change desktops (Labwc default) -->
      <mousebind direction="Up" action="Scroll">
        <action name="GoToDesktop" to="left" wrap="yes" />
      </mousebind>
      <mousebind direction="Down" action="Scroll">
        <action name="GoToDesktop" to="right" wrap="yes" />
      </mousebind>
    </context>

  </mouse>

  <touch deviceName="" mapToOutput="" mouseEmulation="no"/>

  <tablet mapToOutput="" rotate="0" mouseEmulation="no">
    <area top="0.0" left="0.0" width="0.0" height="0.0" />
    <map button="Tip"     to="Left" />
    <map button="Stylus"  to="Right" />
    <map button="Stylus2" to="Middle" />
  </tablet>

  <tabletTool motion="absolute" relativeMotionSensitivity="1.0" />

  <libinput>
    <device category="default">
      <naturalScroll></naturalScroll>
      <leftHanded></leftHanded>
      <pointerSpeed></pointerSpeed>
      <accelProfile></accelProfile>
      <tap>yes</tap>
      <tapButtonMap></tapButtonMap>
      <tapAndDrag></tapAndDrag>
      <dragLock></dragLock>
      <threeFingerDrag></threeFingerDrag>
      <middleEmulation></middleEmulation>
      <disableWhileTyping></disableWhileTyping>
      <clickMethod></clickMethod>
      <scrollMethod></scrollMethod>
      <sendEventsMode></sendEventsMode>
      <calibrationMatrix></calibrationMatrix>
      <scrollFactor>1.0</scrollFactor>
    </device>
  </libinput>

  <!-- Window rules ported from Openbox <applications> (best-effort) -->
  <windowRules>
    <!-- st Navigator fullscreen -->
    <windowRule identifier="st" title="Navigator">
      <action name="ToggleFullscreen" />
    </windowRule>

    <!-- Alacritty borderless / no server-side decoration -->
    <windowRule identifier="Alacritty" serverDecoration="no" />

    <!-- tdrop borderless / no server-side decoration -->
    <windowRule identifier="tdrop" serverDecoration="no" />
  </windowRules>

  <menu>
    <ignoreButtonReleasePeriod>250</ignoreButtonReleasePeriod>
    <showIcons>yes</showIcons>
  </menu>

  <magnifier>
    <width>400</width>
    <height>400</height>
    <initScale>2.0</initScale>
    <increment>0.2</increment>
    <useFilter>true</useFilter>
  </magnifier>

</labwc_config>

